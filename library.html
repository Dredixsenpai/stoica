<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Stoic Way – My Library</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #050507;
      --border-subtle: #232323;
      --accent: #f4c15d;
      --accent-soft: #f8dd9b;
      --accent-3: #f06c5f;
      --text: #f5f5f5;
      --muted: #9f9f9f;
      --card-radius: 24px;
      --transition-fast: 0.22s ease-out;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { height: 100%; scroll-behavior: smooth; }
    body { min-height: 100%; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #050507;
      color: var(--text);
      min-height: 100vh;
    }

    a { color: inherit; text-decoration: none; }

    /* ───── HEADER ───── */

    header {
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1180px;
      margin: 0 auto;
      padding: 20px 24px;
      transition: padding 0.3s ease, background 0.3s ease;
    }

    header.scrolled {
      padding: 12px 24px;
      background: rgba(5,5,7,0.88);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(255,255,255,0.04);
      left: 0; right: 0;
      max-width: none;
    }

    .logo {
      font-family: "Times New Roman", Georgia, serif;
      font-size: 26px;
      letter-spacing: 0.38em;
      text-transform: uppercase;
    }

    nav { display: flex; gap: 20px; font-size: 13px; text-transform: uppercase; letter-spacing: 0.14em; }
    nav a { color: var(--muted); padding-bottom: 3px; border-bottom: 1px solid transparent; transition: color var(--transition-fast), border-color var(--transition-fast); }
    nav a:hover { color: var(--accent-soft); border-bottom-color: var(--accent-soft); }
    nav a.active { color: var(--accent-soft); border-bottom-color: var(--accent-soft); }

    /* ───── LIBRARY LAYOUT ───── */

    .library-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 120px 24px 80px;
      background: radial-gradient(ellipse at 50% 10%, #0f0f13 0%, #050507 55%);
    }

    .library-heading {
      font-size: clamp(28px, 4.5vw, 40px);
      font-weight: 700;
      margin-bottom: 8px;
      text-align: center;
    }

    .library-sub {
      font-size: 15px;
      color: var(--muted);
      margin-bottom: 48px;
      text-align: center;
    }

    .library-count {
      font-size: 12px;
      color: #555;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      margin-bottom: 28px;
    }

    /* ───── TWO-COLUMN GRID ───── */

    .library-column {
      width: 100%;
      max-width: 1060px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 28px;
      align-items: start;
    }

    /* ───── CARDS ───── */

    .saved-card {
      position: relative;
      border-radius: var(--card-radius);
      border: 1px solid var(--border-subtle);
      box-shadow: 0 20px 60px rgba(0,0,0,0.7);
      background: radial-gradient(ellipse at top left, #1a1a1c 0%, #0e0e10 55%);
      padding: 36px 32px 28px;
      overflow: hidden;
      transition: border-color 0.35s ease, box-shadow 0.35s ease, transform 0.35s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s ease;
    }

    /* subtle shimmer line across the top */
    .saved-card::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent 0%, rgba(244,193,93,0.15) 30%, rgba(244,193,93,0.25) 50%, rgba(244,193,93,0.15) 70%, transparent 100%);
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    /* on hover: lift, glow */
    .saved-card:hover {
      transform: translateY(-6px) scale(1.015);
      border-color: rgba(244,193,93,0.25);
      box-shadow:
        0 28px 70px rgba(0,0,0,0.8),
        0 0 40px rgba(244,193,93,0.04),
        inset 0 1px 0 rgba(255,255,255,0.03);
    }

    .saved-card:hover::before {
      opacity: 1;
    }

    .card-theme-pill {
      display: inline-block;
      padding: 5px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.4);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--accent-soft);
      margin-bottom: 28px;
    }

    .card-quote {
      font-family: Georgia, "Times New Roman", serif;
      font-size: clamp(19px, 2.6vw, 24px);
      line-height: 1.65;
      font-weight: 400;
      margin-bottom: 24px;
      color: #f0f0f0;
    }

    .card-quote::before { content: "\201C"; }
    .card-quote::after  { content: "\201D"; }

    .card-attribution {
      display: flex;
      align-items: baseline;
      gap: 10px;
      margin-bottom: 8px;
    }

    .card-author {
      font-size: 18px;
      font-weight: 600;
      color: var(--text);
    }

    .card-source {
      font-size: 13px;
      color: var(--muted);
      font-style: italic;
    }

    .card-divider {
      width: 40px;
      height: 1px;
      background: linear-gradient(90deg, var(--accent), transparent);
      margin: 22px 0;
    }

    /* ───── EXPANDABLE EXPLANATION ───── */

    .card-explain-toggle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border: none;
      background: none;
      color: var(--accent-soft);
      font-size: 13px;
      letter-spacing: 0.06em;
      cursor: pointer;
      padding: 6px 0;
      transition: color var(--transition-fast);
    }

    .card-explain-toggle:hover { color: var(--accent); }
    .card-explain-toggle .toggle-icon { display: inline-block; transition: transform 0.3s ease; font-size: 11px; }
    .card-explain-toggle.open .toggle-icon { transform: rotate(180deg); }

    .card-explanation {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: max-height 0.4s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s ease;
    }

    .card-explanation.open {
      max-height: 600px;
      opacity: 1;
      overflow-y: auto;
    }

    .card-explanation.open::-webkit-scrollbar { width: 5px; }
    .card-explanation.open::-webkit-scrollbar-track { background: transparent; }
    .card-explanation.open::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
    .card-explanation.open::-webkit-scrollbar-thumb:hover { background: #555; }

    .card-explanation-inner {
      padding-top: 16px;
      padding-right: 8px;
      font-size: 14px;
      line-height: 1.75;
      color: #c8c8c8;
    }

    .card-explanation-inner strong { color: var(--accent); font-weight: 500; }

    /* ───── HEART REMOVE BUTTON ───── */

    .card-save-btn {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 36px;
      height: 36px;
      border: none;
      background: rgba(0,0,0,0.35);
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.22s ease, background 0.22s ease;
      z-index: 5;
    }

    .card-save-btn:hover {
      background: rgba(0,0,0,0.55);
      transform: scale(1.12);
    }

    .card-save-btn:active {
      transform: scale(0.92);
    }

    .card-save-btn svg {
      width: 18px;
      height: 18px;
    }

    .card-save-btn .heart-path {
      fill: var(--accent-3);
      stroke: var(--accent-3);
      stroke-width: 1;
      transition: fill 0.25s ease, stroke 0.25s ease;
    }

    .card-save-btn:hover .heart-path {
      fill: none;
      stroke: #777;
    }

    /* ───── EMPTY STATE ───── */

    .library-empty {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 80px 24px;
      gap: 16px;
    }

    .library-empty.visible { display: flex; }

    .library-empty-icon {
      font-size: 48px;
      opacity: 0.25;
    }

    .library-empty-text {
      font-size: 17px;
      color: var(--muted);
    }

    .library-empty-hint {
      font-size: 13px;
      color: #555;
    }

    .library-empty-link {
      display: inline-block;
      margin-top: 12px;
      padding: 12px 28px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent-soft);
      transition: all 0.25s ease;
    }

    .library-empty-link:hover {
      border-color: var(--accent);
      background: rgba(244,193,93,0.06);
    }

    /* Card removal animation */
    .saved-card.removing {
      opacity: 0;
      transform: scale(0.92);
      transition: opacity 0.35s ease, transform 0.35s ease;
    }

    /* ───── RESPONSIVE ───── */

    @media (max-width: 860px) {
      .library-column {
        grid-template-columns: 1fr;
        max-width: 620px;
      }
    }

    @media (max-width: 720px) {
      header { padding: 16px; }
      header.scrolled { padding: 10px 16px; }
      .logo { font-size: 20px; letter-spacing: 0.3em; }
      nav { gap: 14px; font-size: 11px; }
      .library-section { padding: 100px 16px 60px; }
      .library-column { max-width: 100%; }
      .saved-card { padding: 28px 22px 24px; }
      .card-quote { font-size: 18px; }
      .card-author { font-size: 16px; }
      .card-attribution { flex-direction: column; gap: 4px; }
    }

    @media (max-width: 420px) {
      .card-quote { font-size: 17px; line-height: 1.6; }
    }
  </style>
</head>
<body>

  <header>
    <a href="index.html" class="logo">STOIC&nbsp;WAY</a>
    <nav>
      <a href="cards.html">Cards</a>
      <a href="index.html">Index</a>
      <a href="admin.html">Admin</a>
    </nav>
  </header>

  <section class="library-section">
    <h1 class="library-heading">My Library</h1>
    <p class="library-sub">Quotes you've saved for reflection.</p>
    <div class="library-count" id="library-count"></div>

    <div class="library-column" id="library-cards"></div>

    <div class="library-empty" id="library-empty">
      <div class="library-empty-icon">&#9825;</div>
      <div class="library-empty-text">No saved quotes yet.</div>
      <div class="library-empty-hint">Tap the heart on any card to save it here.</div>
      <a href="cards.html" class="library-empty-link">Browse Cards</a>
    </div>
  </section>

  <script>
    // ════════════════════════════════════
    //  EMBEDDED QUOTE DATA (same as cards.html)
    // ════════════════════════════════════
    const EMBEDDED_QUOTES = [
  {
    "id": 1,
    "theme": "On Action",
    "moods": ["stuck", "procrastinating"],
    "quote": "Waste no more time arguing what a good man should be. Be one.",
    "author": "Marcus Aurelius",
    "source": "Meditations, 10.16",
    "explanation": "Marcus reminds us that philosophy is not theoretical. Virtue is practiced through action, not endless discussion."
  },
  {
    "id": 2,
    "theme": "On Perspective",
    "moods": ["anxious", "overwhelmed"],
    "quote": "We suffer more often in imagination than in reality.",
    "author": "Seneca",
    "source": "Letters from a Stoic, Letter 13",
    "explanation": "Much of our stress comes from anticipation rather than events themselves."
  },
  {
    "id": 3,
    "theme": "On Discipline",
    "moods": ["distracted", "unmotivated"],
    "quote": "No man is free who is not master of himself.",
    "author": "Epictetus",
    "source": "Discourses, Book 2",
    "explanation": "True freedom in Stoicism is self-mastery. Discipline creates autonomy."
  },
  {
    "id": 4,
    "theme": "On Adversity",
    "moods": ["frustrated", "setback"],
    "quote": "The impediment to action advances action. What stands in the way becomes the way.",
    "author": "Marcus Aurelius",
    "source": "Meditations, 5.20",
    "explanation": "Obstacles are not interruptions \u2014 they are the path itself."
  },
  {
    "id": 5,
    "theme": "On Time",
    "moods": ["unfocused", "wasting time"],
    "quote": "It is not that we have a short time to live, but that we waste much of it.",
    "author": "Seneca",
    "source": "On the Shortness of Life",
    "explanation": "Life feels short when attention is fragmented. Intentional living stretches time."
  },
  {
    "id": 6,
    "theme": "On Character",
    "moods": ["self-doubt", "uncertain"],
    "quote": "First say to yourself what you would be; and then do what you have to do.",
    "author": "Epictetus",
    "source": "Discourses, Book 3",
    "explanation": "Identity precedes action. Define your character, then act accordingly."
  },
  {
    "id": 7,
    "theme": "On Resilience",
    "moods": ["tired", "burned out"],
    "quote": "Difficulties strengthen the mind, as labor does the body.",
    "author": "Seneca",
    "source": "Letters from a Stoic, Letter 67",
    "explanation": "Struggle is resistance training for the mind."
  },
  {
    "id": 8,
    "theme": "On Control",
    "moods": ["angry", "reactive"],
    "quote": "It is not things themselves that disturb us, but our judgments about them.",
    "author": "Epictetus",
    "source": "Enchiridion, 5",
    "explanation": "Events are neutral. Our interpretation gives them emotional force."
  },
  {
    "id": 9,
    "theme": "On Perspective",
    "moods": ["anxious", "angry", "stuck", "overwhelmed", "doubting yourself", "procrastinating", "facing change"],
    "quote": "\u201CAll is as thinking makes it so.\u201D The retort made to Monimus the Cynic is clear enough: but clear too is the value of his saying, if one takes the kernel of it, as far as it is true.",
    "author": "Marcus Aurelius",
    "source": "Meditations 2.15",
    "explanation": "Here Marcus recalls a saying attributed as being spoken to Monimus the Cynic, once a slave to a Corinthian money-changer: \u201CAll is as thinking makes it so\u201D - sometimes rendered simply as \u201CAll is opinion.\u201D\n\nTaken literally, this is obviously not true. Fire still burns. Pain still hurts. Loss is still loss. But the value of the statement lies in its great kernel of truth: what disturbs us is not the event itself, but the judgment we attach to it.\n\nEvery perception, emotional impulse, and decision begins with a thought, often one that we so quickly mistake it for reality. We feel insulted because we decide we\u2019ve been wronged. We feel afraid because we judge a situation to be threatening. We feel embarrassed by projecting our fears and paranoias onto the unknowable minds of others.\n\nStoicism asks us to slow that process down.\n\nLetting ourselves fall prey to our impulses lets that part of you which is chaos snatch the reins from that part of you that is reason. If we follow reason, and judgements create our experience, then as long as we are rational, living a life in accordance with nature, we are not powerless. \n\nWe can examine our thoughts. We can replace \u201CThis is terrible\u201D with \u201CThis is difficult, but workable.\u201D We can replace \u201CI\u2019ve failed\u201D with \u201CI\u2019ve learned.\u201D We can choose growth over ego. We can be the audience to our own lives, and one we ought to give a good show.\n\nIn this way, not only does your judgement of reality change, but so too can your character. \n\n\u201CI think therefore I am\u201D\n\nYou become what you repeatedly tell you are. Not empty affirmations, chosen judgements that shape conduct over time. It\u2019s with repetition that all skills are learned, with habit all virtues become character."
  }
];

    // ════════════════════════════════════
    //  LOAD QUOTE DATA & RENDER
    // ════════════════════════════════════
    let allQuotes = [];

    fetch("quotes.json")
      .then(res => {
        if (!res.ok) throw new Error("Could not load quotes.json");
        return res.json();
      })
      .then(data => { allQuotes = data; renderLibrary(); })
      .catch(() => { allQuotes = EMBEDDED_QUOTES; renderLibrary(); });

    function getSavedIds() {
      try { return JSON.parse(localStorage.getItem("stoic_saved") || "[]"); }
      catch { return []; }
    }

    function removeSavedId(id) {
      const ids = getSavedIds().filter(i => i !== id);
      localStorage.setItem("stoic_saved", JSON.stringify(ids));
    }

    function renderLibrary() {
      const container = document.getElementById("library-cards");
      const emptyEl = document.getElementById("library-empty");
      const countEl = document.getElementById("library-count");
      const savedIds = getSavedIds();

      const savedQuotes = savedIds
        .map(id => allQuotes.find(q => q.id === id))
        .filter(Boolean);

      container.innerHTML = "";

      if (savedQuotes.length === 0) {
        emptyEl.classList.add("visible");
        countEl.textContent = "";
        return;
      }

      emptyEl.classList.remove("visible");
      countEl.textContent = `${savedQuotes.length} saved quote${savedQuotes.length !== 1 ? "s" : ""}`;

      savedQuotes.forEach((q, i) => {
        const card = document.createElement("div");
        card.className = "saved-card";
        card.dataset.quoteId = q.id;
        card.innerHTML = `
          <button class="card-save-btn" title="Remove from library" data-id="${q.id}">
            <svg viewBox="0 0 24 24"><path class="heart-path" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
          </button>
          <div class="card-theme-pill">${q.theme}</div>
          <div class="card-quote">${q.quote}</div>
          <div class="card-attribution">
            <span class="card-author">${q.author}</span>
            <span class="card-source">${q.source}</span>
          </div>
          <div class="card-divider"></div>
          <button class="card-explain-toggle" data-idx="${i}">
            What does this mean? <span class="toggle-icon">\u25BC</span>
          </button>
          <div class="card-explanation" id="lib-explain-${i}">
            <div class="card-explanation-inner">${q.explanation}</div>
          </div>
        `;
        container.appendChild(card);
      });

      // Toggle explanation
      container.querySelectorAll(".card-explain-toggle").forEach(btn => {
        btn.addEventListener("click", () => {
          const panel = document.getElementById(`lib-explain-${btn.dataset.idx}`);
          const isOpen = panel.classList.contains("open");
          panel.classList.toggle("open", !isOpen);
          btn.classList.toggle("open", !isOpen);
          btn.firstChild.textContent = isOpen ? "What does this mean? " : "Close explanation ";
        });
      });

      // Remove button
      container.querySelectorAll(".card-save-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = parseInt(btn.dataset.id, 10);
          const card = btn.closest(".saved-card");
          card.classList.add("removing");
          setTimeout(() => {
            removeSavedId(id);
            renderLibrary();
          }, 320);
        });
      });
    }

    // ════════════════════════════════════
    //  HEADER SCROLL
    // ════════════════════════════════════
    const headerEl = document.querySelector("header");
    window.addEventListener("scroll", () => {
      headerEl.classList.toggle("scrolled", window.scrollY > 40);
    });
  </script>
</body>
</html>
